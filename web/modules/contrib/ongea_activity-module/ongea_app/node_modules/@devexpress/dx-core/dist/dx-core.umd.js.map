{"version":3,"file":"dx-core.umd.js","sources":["../src/utils.js","../src/plugin-host.js","../src/event-emitter.js","../src/shallow-equal.js","../src/memoize.js","../src/easings.js"],"sourcesContent":["const compare = (a, b) => {\n  const aPosition = a.position();\n  const bPosition = b.position();\n  for (let i = 0; i < Math.min(aPosition.length, bPosition.length); i += 1) {\n    if (aPosition[i] < bPosition[i]) return -1;\n    if (aPosition[i] > bPosition[i]) return 1;\n  }\n  return aPosition.length - bPosition.length;\n};\n\nexport const insertPlugin = (array, newItem) => {\n  const result = array.slice();\n  const targetIndex = array.findIndex(item => compare(newItem, item) < 0);\n  result.splice(targetIndex < 0 ? array.length : targetIndex, 0, newItem);\n  return result;\n};\n","import { insertPlugin } from './utils';\n\nconst getDependencyError = (pluginName, dependencyName) =>\n  new Error(`The '${pluginName}' plugin requires '${dependencyName}' to be defined before it.`);\n\nexport class PluginHost {\n  constructor() {\n    this.plugins = [];\n    this.subscriptions = [];\n    this.gettersCache = {};\n  }\n  ensureDependencies() {\n    const defined = new Set();\n    const knownOptionals = new Map();\n    this.plugins\n      .filter(plugin => plugin.container)\n      .forEach((plugin) => {\n        if (knownOptionals.has(plugin.name)) {\n          throw (getDependencyError(knownOptionals.get(plugin.name), plugin.name));\n        }\n\n        plugin.dependencies\n          .forEach((dependency) => {\n            if (defined.has(dependency.name)) return;\n            if (dependency.optional) {\n              if (!knownOptionals.has(dependency.name)) {\n                knownOptionals.set(dependency.name, plugin.name);\n              }\n              return;\n            }\n            throw (getDependencyError(plugin.name, dependency.name));\n          });\n\n        defined.add(plugin.name);\n      });\n  }\n  registerPlugin(plugin) {\n    this.plugins = insertPlugin(this.plugins, plugin);\n    this.cleanPluginsCache();\n  }\n  unregisterPlugin(plugin) {\n    this.plugins.splice(this.plugins.indexOf(plugin), 1);\n    this.cleanPluginsCache();\n  }\n  cleanPluginsCache() {\n    this.validationRequired = true;\n    this.gettersCache = {};\n    this.knownKeysCache = {};\n  }\n  knownKeys(postfix) {\n    if (!this.knownKeysCache[postfix]) {\n      this.knownKeysCache[postfix] = Array.from(this.plugins\n        .map(plugin => Object.keys(plugin))\n        .map(keys => keys.filter(key => key.endsWith(postfix))[0])\n        .filter(key => !!key)\n        .reduce((acc, key) => acc.add(key), new Set()))\n        .map(key => key.replace(postfix, ''));\n    }\n    return this.knownKeysCache[postfix];\n  }\n  collect(key, upTo) {\n    if (this.validationRequired) {\n      this.ensureDependencies();\n      this.validationRequired = false;\n    }\n\n    if (!this.gettersCache[key]) {\n      this.gettersCache[key] = this.plugins.map(plugin => plugin[key]).filter(plugin => !!plugin);\n    }\n    if (!upTo) return this.gettersCache[key];\n\n    const upToIndex = this.plugins.indexOf(upTo);\n    return this.gettersCache[key].filter((getter) => {\n      const pluginIndex = this.plugins.findIndex(plugin => plugin[key] === getter);\n      return pluginIndex < upToIndex;\n    });\n  }\n  get(key, upTo) {\n    const plugins = this.collect(key, upTo);\n\n    if (!plugins.length) return undefined;\n\n    let result = plugins[0]();\n    plugins.slice(1).forEach((plugin) => {\n      result = plugin(result);\n    });\n    return result;\n  }\n  registerSubscription(subscription) {\n    const index = this.subscriptions.indexOf(subscription);\n    if (index === -1) { this.subscriptions.push(subscription); }\n  }\n  unregisterSubscription(subscription) {\n    const index = this.subscriptions.indexOf(subscription);\n    if (index !== -1) { this.subscriptions.splice(this.subscriptions.indexOf(subscription), 1); }\n  }\n  broadcast(event, message) {\n    this.subscriptions.forEach(subscription => subscription[event] && subscription[event](message));\n  }\n}\n","export class EventEmitter {\n  constructor() {\n    this.handlers = [];\n  }\n  emit(e) {\n    this.handlers.forEach(handler => handler(e));\n  }\n  subscribe(handler) {\n    this.handlers.push(handler);\n  }\n  unsubscribe(handler) {\n    this.handlers.splice(this.handlers.indexOf(handler), 1);\n  }\n}\n","export function shallowEqual(objA, objB) {\n  if (objA === objB) {\n    return true;\n  }\n\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  const hasOwn = Object.prototype.hasOwnProperty;\n  for (let i = 0; i < keysA.length; i += 1) {\n    if (!hasOwn.call(objB, keysA[i]) ||\n        objA[keysA[i]] !== objB[keysA[i]]) {\n      return false;\n    }\n\n    const valA = objA[keysA[i]];\n    const valB = objB[keysA[i]];\n\n    if (valA !== valB) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function argumentsShallowEqual(prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  }\n\n  for (let i = 0; i < prev.length; i += 1) {\n    if (prev[i] !== next[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","import { argumentsShallowEqual } from './shallow-equal';\n\nexport const memoize = (func) => {\n  let lastArgs = null;\n  let lastResult = null;\n  return (...args) => {\n    if (lastArgs === null || !argumentsShallowEqual(lastArgs, args)) {\n      lastResult = func(...args);\n    }\n    lastArgs = args;\n    return lastResult;\n  };\n};\n","export const easeInQuad = t => t * t;\nexport const easeOutQuad = t => t * (2 - t);\nexport const easeInOutQuad = t => (t < 0.5\n  ? 2 * t * t\n  : -1 + ((4 - (2 * t)) * t));\n\nexport const easeInCubic = t => t * t * t;\nexport const easeOutCubic = t => ((t - 1) * (t - 1) * (t - 1)) + 1;\nexport const easeInOutCubic = t => (t < 0.5\n  ? 4 * t * t * t\n  : ((t - 1) * ((2 * t) - 2) * ((2 * t) - 2)) + 1);\n\nexport const easeInQuart = t => t * t * t * t;\nexport const easeOutQuart = t => 1 - ((t - 1) * (t - 1) * (t - 1) * (t - 1));\nexport const easeInOutQuart = t => (t < 0.5\n  ? 8 * t * t * t * t\n  : 1 - (8 * (t - 1) * (t - 1) * (t - 1) * (t - 1)));\n\nexport const easeInQuint = t => t * t * t * t * t;\nexport const easeOutQuint = t => 1 + ((t - 1) * (t - 1) * (t - 1) * (t - 1) * (t - 1));\nexport const easeInOutQuint = t => (t < 0.5\n  ? 16 * t * t * t * t * t\n  : 1 + (16 * (t - 1) * (t - 1) * (t - 1) * (t - 1) * (t - 1)));\n"],"names":["compare","a","b","aPosition","position","bPosition","i","Math","min","length","insertPlugin","array","newItem","result","slice","targetIndex","findIndex","item","splice","getDependencyError","pluginName","dependencyName","Error","PluginHost","plugins","subscriptions","gettersCache","defined","Set","knownOptionals","Map","filter","plugin","container","forEach","has","name","get","dependencies","dependency","optional","set","add","cleanPluginsCache","indexOf","validationRequired","knownKeysCache","postfix","Array","from","map","Object","keys","key","endsWith","reduce","acc","replace","upTo","ensureDependencies","upToIndex","getter","pluginIndex","collect","undefined","subscription","index","push","event","message","EventEmitter","handlers","e","handler","shallowEqual","objA","objB","keysA","keysB","hasOwn","prototype","hasOwnProperty","call","valA","valB","argumentsShallowEqual","prev","next","memoize","func","lastArgs","lastResult","args","easeInQuad","t","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint"],"mappings":"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"}